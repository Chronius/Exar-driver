===============================================================================
									RTSoft 2017
							Exar driver users guide 
===============================================================================
Revision History
----------------
Changes from 2.0 to 2.0 beta
- Fixed issue when driver not work if number of ports greater than 16
- Added switch mode 422/485
This driver and installation procedure have been tested on kernel 3.14.59

Для корректной работы  в /etc/default/grub
в строке GRUB_CMD_LINUX_DEFAULT = "quiet ... 8250.nr_uarts=0 pci=routeirq" 
сохранить и выполнить: update-grub

Драйвер для плат носителей с микросхемами Exar17v358
Максимальное число каналов - 32

Структура директории
/src
--->/Makefile   - правила сборки
--->/readme     - Описание драйвера от производителя
--->/xr17v35x.с - Исходный код драйвера
./insm.sh		- Скипт для выгрузки стандартного драйвера serial и запуска 
драйвера xr17v35x
./README 		- Данный мануал
./setup_exar_port - скрипт для настройки портов в стандартный режим 485
./setup_exar_full - скрипт для настройки всех портов в режим полного дуплекса
./setup_exar_hald - скрипт для настройки всех портов в режим полу дуплекс
./send_recv	  	  - скрипт для тестирования портов режиме полного дуплекса:
Отправляет 115200 рандомных байт в каждый порт, получаемые данные сохраняются в
файл ./tmp/name_of_port
./send		  	  - скрипт отправляющий во все порты 20000 рандомных байт х10
раз, количество можно изменить поменяв соответсвующие значения bs и count 
в скрипте
./recv_and_save   - скрипт для тестирования на прием, принимает и записывает
данные в файл ./tmp/name_of_port в течение 20 секунд, время можно изменить 
поменяв значение параметра <WAIT_TO_REC>


В качестве параметра для всех скриптов, кроме ./insm.sh и ./kill_xr_cat
передать скорость

./kill_xr_cat - скрипт для того чтобы убить все процессы cat которые 
в данный момент открыли порты на чтение

Переключении между режимами дуплекс/полу дуплекс производиться при настройке
канала путем включения/выключения ножки CTS:
	stty -F /dev/ttyXR29 crtscts - режим дуплекса
	stty -F /dev/ttyXR29 -crtscts - режим полу дуплекса

Сборка из исходников командой и запуск
> make
Установка в ядро
> make install
Очистка директории от временных файлов и файлов сборки
> make clean